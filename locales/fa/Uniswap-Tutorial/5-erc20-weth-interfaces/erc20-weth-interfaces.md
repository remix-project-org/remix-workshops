در این بخش، ما به بررسی رابط `IERC20`، یک رابط استاندارد برای تعامل با توکن‌های ERC-20 و رابط `IWETH`، یک رابط استاندارد برای تعامل با اتر بسته‌بندی شده (WETH) می‌پردازیم. درک این رابط‌ها بسیار حیاتی است زیرا در قرارداد مبادله Uniswap V3 برای مدیریت انتقال توکن‌ها و تأییدیه‌ها استفاده می‌شود.

شما می‌توانید دوره "توکن ERC20 Solidity" برای مبتدیان را در LearnEth بیابید تا استاندارد توکن ERC20 را به طور دقیق‌تری درک کنید.

## رابطه IERC20

در خط 80، ما رابط `IERC20` را تعریف می کنیم. این رابط مجموعه‌ای استاندارد از توابعی را تعیین می‌کند که توکن‌های ERC-20 باید پیاده‌سازی کنند. بیایید توابع کلیدی را در این رابط بررسی کنیم:

### 1. عرضه کل

در خط ۸۱، ما تابع `totalSupply` را تعریف می‌کنیم. این تابع مجموع عرضه توکن را برمی‌گرداند.

### 2. تعادل

در خط ۸۳، ما تابع `balanceOf` را تعریف می‌کنیم. این تابع موجودی آدرس مشخص شده را باز می‌گرداند.

### 3. انتقال

در خط ۸۵، ما تابع `transfer` را تعریف می‌کنیم. این تابع توکن‌ها را از فرستنده به گیرنده مشخص شده انتقال می‌دهد.

### 4. حق‌الزحمه

در خط 87، ما تابع `allowance` را تعریف می کنیم. این تابع مقدار توکن‌هایی را که خرج‌کننده مجاز به خرج کردن به نمایندگی از مالک است باز می‌گرداند.

### 5. تأیید کردن

در خط ۸۹، ما تابع `approve` را تعریف می‌کنیم. هنگام فراخوانی، این تابع یک خرج کننده را برای خرج کردن مبلغ مشخصی از توکن‌ها به نمایندگی از فرستنده تأیید می‌کند.

### 6. انتقال از

در خط 91، ما تابع `transferFrom` را تعریف می کنیم. این تابع توکن‌ها را از فرستنده مشخص شده به گیرنده انتقال می‌دهد. این تابع تنها می‌تواند توسط خرج‌کننده فراخوانی شود اگر خرج‌کننده مجاز باشد که مقدار مشخصی از توکن‌ها را به نمایندگی از فرستنده هزینه کند.

### 7. رویدادها

در خطوط ۱۰۲-۱۰۳، ما رویدادهای `انتقال` و `تأیید` را تعریف می‌کنیم. این رویدادها زمانی صادر می‌شوند که به ترتیب توابع `انتقال` و `تأیید` فراخوانی می‌شوند.

## رابط IWETH

در خط ۱۰۶، ما رابط `IWETH` را تعریف می‌کنیم. این رابط `IERC20` را گسترش می‌دهد و دو تابع اضافی را تعریف می‌کند:

### 1. سپرده

در خط 107، ما تابع `deposit` را تعریف می‌کنیم. این تابع ETH را به قرارداد واریز می‌کند و معادل آن مقدار WETH را برمی‌گرداند. این تابع برای تبدیل اتر (ETH) به اتر Wrapped (WETH) استفاده می‌شود.
ما باید اتر را به WETH تبدیل کنیم زیرا قرارداد سواپ Uniswap V3 فقط از توکن‌های ERC-20 پشتیبانی می‌کند.

### 2. عقب نشینی

در خط ۱۰۹، ما تابع `withdraw` را تعریف می‌کنیم. این تابع مقدار مشخصی از WETH را از قرارداد خارج کرده و معادل آن مقدار ETH را بازمی‌گرداند. این تابع برای باز کردن WETH به ETH استفاده می‌شود.

## نتیجه گیری

در این آموزش، قرارداد مبادله Uniswap V3 را بررسی کردیم.  برای درک کامل نحوه عملکرد یونی سواپ، سعی کنید چند مبادله در <a href="https://app.uniswap.org/" target="_blank">برنامه غیرمتمرکز یونی سواپ</a> انجام دهید و به <a href="https://docs.uniswap.org/" target="_blank">مدارک یونی سواپ</a> بروید.
