در این بخش، **فرآیند مقداردهی اولیه** قرارداد هوشمند چندامضایی را بررسی خواهیم کرد. ما تابع سازنده را بررسی خواهیم کرد و نحوه تنظیم وضعیت اولیه قرارداد توسط آن را بررسی خواهیم کرد.

## توجه داشته باشید

از این بخش به بعد در این آموزش، ما یک قرارداد چندامضایی ایجاد خواهیم کرد. در بخش‌های بعدی، قرارداد به طور فزاینده‌ای کامل‌تر خواهد شد.

## نمای کلی

در این بخش، قرارداد شامل رویدادها، متغیرهای حالت، اصلاح‌کننده‌ها و توابع است. **رویدادها** با ثبت فعالیت‌های مشخص‌شده در بلاکچین، شفافیت ایجاد می‌کنند، در حالی که **اصلاح‌کننده‌ها** تضمین می‌کنند که فقط کاربران مجاز می‌توانند عملکردهای خاصی را اجرا کنند.

## متغیرهای حالت

در خط ۴، خود قرارداد MultisigWallet را داریم. در ابتدای قرارداد، ما سه متغیر حالت داریم.

1. **`owners`:** آرایه‌ای شامل آدرس‌های همه مالکان کیف پول چندامضایی (خط ۵).
2. **`isOwner`:** نگاشتی که نشان می‌دهد آیا یک آدرس مالک است یا خیر (خط ۶).
3. تعداد تاییدیه‌های مورد نیاز برای یک تراکنش (خط ۷).

راه‌اندازی آرایه و نگاشت به ما این امکان را می‌دهد که به راحتی لیست مالکان را بازیابی کنیم و تأیید کنیم که آیا یک آدرس، مالک است یا خیر.

## اصلاح کننده ها

در مرحله بعد، یک اصلاح‌کننده به نام `onlyOwner` داریم (خط 9). اصلاح‌کننده‌ها در سالیدیتی کلمات کلیدی خاصی هستند که می‌توانند برای اصلاح رفتار توابع استفاده شوند. در مورد ما، اصلاح‌کننده‌ی `onlyOwner` تضمین می‌کند که فقط مالکان می‌توانند یک تابع را اجرا کنند. این کار را با بررسی اینکه آیا آدرس **تماس‌گیرنده** مالک است یا خیر، انجام می‌دهد.

## عملکرد سازنده

تابع «سازنده» (خط ۱۴) فقط یک بار در طول استقرار قرارداد اجرا می‌شود. پارامترهای ضروری، در این مورد، لیست مالکان و تعداد تأییدیه‌های مورد نیاز (خط ۱۴) را مقداردهی اولیه می‌کند.

در خطوط ۱۵ و ۱۶، دو دستور `require` داریم تا از معتبر بودن ورودی‌ها اطمینان حاصل کنیم. در این مورد، ما الزام می‌کنیم که حداقل یک مالک وجود داشته باشد و تعداد تأییدیه‌های مورد نیاز باید بزرگتر از صفر و کوچکتر یا مساوی تعداد مالکان باشد.

سپس سازنده با تأیید اینکه address(0) نیست (خط 25) و مالک منحصر به فرد است (خط 26)، وضعیت قرارداد را مقداردهی اولیه می‌کند.  سپس یک جفت کلید/مقدار به نگاشت isOwner اضافه می‌کند (خط ۲۸)، و سپس آرایه `owners` را با آدرس‌های مالک ارائه شده پر می‌کند (خط ۲۹).

در نهایت، متغیر `numConfirmationsRequired` را با مقدار مشخص شده تنظیم می‌کند (خط 32).

## تابع getOwners

تابع `getOwners` (خط ۳۶) به کاربران اجازه می‌دهد تا لیست مالکان کیف پول چندامضایی را بازیابی کنند. آرایه `owners` (خط ۳۷) را برمی‌گرداند.

## تابع getNumConfirmationsRequired

تابع `getNumConfirmationsRequired` (خط ۴۱) به کاربران اجازه می‌دهد تا تعداد تأییدیه‌های مورد نیاز برای یک تراکنش را بازیابی کنند. متغیر `numConfirmationsRequired` را برمی‌گرداند (خط ۴۲).

## نتیجه گیری

در این بخش، فرآیند راه‌اندازی قرارداد هوشمند چندامضایی را بررسی کردیم. ما تابع سازنده را بررسی کردیم و فهمیدیم که چگونه وضعیت اولیه قرارداد را تنظیم می‌کند.

## ⭐️ تکلیف: راه‌اندازی یک کیف پول چندامضایی

یک قرارداد چندامضایی با سه مالک مستقر کنید و برای اجرای تراکنش به دو تأیید نیاز داشته باشید.

1. کامپایل contractInitialization.sol
2. به بخش Deploy & Run Transactions در Remix بروید.
3. بخش «استقرار» را گسترش دهید.
4. در زیر «_OWNERS»، سه آرایه از سه آدرس را وارد کنید.
5. در قسمت «_NUM_CONFIRMATIONS_REQUIRED»، تعداد تأییدیه‌های مورد نیاز برای یک تراکنش را وارد کنید.

**نکات:**

- می‌توانید آدرس‌ها را از منوی کشویی «حساب‌ها» دریافت کنید.
- آرایه آدرس‌ها باید به این فرمت باشد: ["0x123...", "0x456...", "0x789..."].