در این بخش، فرآیند لغو تأییدیه‌ها را بررسی خواهیم کرد. این فرآیند زمانی ضروری است که مالک نظر خود را در مورد یک تراکنش تغییر دهد و بخواهد از اجرای آن جلوگیری کند. این بخش کاملاً سرراست خواهد بود.

## رویداد لغو تأیید

در خط ۱۴، رویداد `RevokeConfirmation` را اضافه کرده‌ایم. این رویداد هر زمان که تأیید تراکنش توسط مالک لغو شود، صادر می‌شود.

## تابع لغو تأیید

در خط ۱۲۹، تابع `revokeConfirmation` را اضافه کرده‌ایم. این به کاربران اجازه می‌دهد تا تأیید تراکنش را لغو کنند.

تابع `revokeConfirmation` یک پارامتر به نام `txIndex` دریافت می‌کند. این شامل سه اصلاح‌کننده است: `onlyOwner`، `txExists` و `notExecuted`.

در خط ۱۳۴، ما نیاز داریم که تراکنش توسط تماس‌گیرنده تأیید شده باشد. این تضمین می‌کند که مالکی که تراکنش را تأیید کرده است، فقط می‌تواند تأیید خود را لغو کند.
سپس متغیر `numConfirmations` تراکنش را یک واحد کاهش می‌دهیم و نگاشت `isConfirmed` اندیس تراکنش و آدرس فراخوانی‌کننده را روی false تنظیم می‌کنیم. در نهایت، رویداد `RevokeConfirmation` را صادر می‌کنیم.

## نتیجه گیری

در این بخش، فرآیند لغو تأییدیه‌ها را بررسی کردیم. ما تابع `revokeConfirmation` را بررسی کردیم و نحوه‌ی عملکرد آن را در جهت لغو تأییدیه‌ها توسط کاربران آموختیم.

## ⭐️ تکلیف: لغو یک تأییدیه

تراکنش ارسال ۲ اتر به اولین حساب را در منوی کشویی «حساب‌ها» تأیید و لغو کنید.

1. مانند تکلیف قبلی، قرارداد چندامضایی را مستقر کنید، مقداری اتر به قرارداد ارسال کنید و سپس تراکنشی را به اولین حساب در منوی کشویی «حساب‌ها» با مقدار ۲ اتر ارسال کنید.
2. همانند تکلیف قبلی، تراکنش را دو بار تأیید کنید.
3. با کلیک روی `revokeConfirmation` و وارد کردن عدد ۰ به عنوان اندیس تراکنش، تراکنش را لغو کنید. اگر دوباره روی «getTransaction» کلیک کنید، باید ببینید که تراکنش یک بار تأیید شده است.

## نتیجه گیری نهایی

در این آموزش، فرآیند ایجاد یک کیف پول چند امضایی را بررسی کردیم. ما یاد گرفتیم که چگونه قرارداد را مقداردهی اولیه کنیم، اتر واریز کنیم، تراکنش‌ها را ارسال، تأیید و لغو کنیم. ما همچنین یاد گرفتیم که چگونه تراکنش‌ها را انجام دهیم و اطلاعات مربوط به کیف پول چندامضایی را بازیابی کنیم.